<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Resampling • mlr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../../../pkgdown.css" rel="stylesheet">
<script src="../../../jquery.sticky-kit.min.js"></script><script src="../../../pkgdown.js"></script><link href="../../../extra.css" rel="stylesheet">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../../../index.html"><img src="https://github.com/pat-s/mlr/blob/master/logo.png?raw=true" width="70"></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../../../articles/mlr.html">Get Started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Basics
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../../articles/tutorial/devel/task.html">Tasks</a>
    </li>
    <li>
      <a href="../../../articles/tutorial/devel/learner.html">Learners</a>
    </li>
    <li>
      <a href="../../../articles/tutorial/devel/train.html">Train</a>
    </li>
    <li>
      <a href="../../../articles/tutorial/devel/predict.html">Predict</a>
    </li>
    <li>
      <a href="../../../articles/tutorial/devel/preproc.html">Preprocessing</a>
    </li>
    <li>
      <a href="../../../articles/tutorial/devel/performance.html">Performance</a>
    </li>
    <li>
      <a href="../../../articles/tutorial/devel/resample.html">Resampling</a>
    </li>
    <li>
      <a href="../../../articles/tutorial/devel/tune.html">Tuning</a>
    </li>
    <li>
      <a href="../../../articles/tutorial/devel/benchmark_experiments.html">Benchmark Experiments</a>
    </li>
    <li>
      <a href="../../../articles/tutorial/devel/parallelization.html">Parallelization</a>
    </li>
    <li>
      <a href="../../../articles/tutorial/devel/visualization.html">Visualization</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Advanced
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../../articles/tutorial/devel/configureMlr.html">Configuration</a>
    </li>
    <li>
      <a href="../../../articles/tutorial/devel/wrapper.html">Wrapped Learners</a>
    </li>
    <li>
      <a href="../../../articles/tutorial/devel/impute.html">Imputation</a>
    </li>
    <li>
      <a href="../../../articles/tutorial/devel/bagging.html">Generic Bagging</a>
    </li>
    <li>
      <a href="../../../articles/tutorial/devel/advanced_tune.html">Advanced Tuning</a>
    </li>
    <li>
      <a href="../../../articles/tutorial/devel/feature_selection.html">Feature Selection</a>
    </li>
    <li>
      <a href="../../../articles/tutorial/devel/nested_resampling.html">Nested Resampling</a>
    </li>
    <li>
      <a href="../../../articles/tutorial/devel/cost_sensitive_classif.html">Cost-Sensitive Classification</a>
    </li>
    <li>
      <a href="../../../articles/tutorial/devel/over_and_undersampling.html">Imbalanced Classification Problems</a>
    </li>
    <li>
      <a href="../../../articles/tutorial/devel/roc_analysis.html">ROC Analysis and Performance Curves</a>
    </li>
    <li>
      <a href="../../../articles/tutorial/devel/multilabel.html">Multilabel Classification</a>
    </li>
    <li>
      <a href="../../../articles/tutorial/devel/learning_curve.html">Learning Curve Analysis</a>
    </li>
    <li>
      <a href="../../../articles/tutorial/devel/partial_dependence.html">Partial Dependence Plots</a>
    </li>
    <li>
      <a href="../../../articles/tutorial/devel/classifier_calibration.html">Classifier Calibration</a>
    </li>
    <li>
      <a href="../../../articles/tutorial/devel/hyperpar_tuning_effects.html">Hyperparameter Tuning Effects</a>
    </li>
    <li>
      <a href="../../../articles/tutorial/devel/out_of_bag_predictions.html">Out-of-Bag Predictions</a>
    </li>
    <li>
      <a href="../../../articles/tutorial/devel/handling_of_spatial_data.html">Handling of Spatial Data</a>
    </li>
    <li>
      <a href="../../../articles/tutorial/devel/functional_data.html">Functional Data</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Extending
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../../articles/tutorial/devel/create_learner.html">Create Custom Learners</a>
    </li>
    <li>
      <a href="../../../articles/tutorial/devel/create_measure.html">Create Custom Measures</a>
    </li>
    <li>
      <a href="../../../articles/tutorial/devel/create_imputation.html">Create Imputation Methods</a>
    </li>
    <li>
      <a href="../../../articles/tutorial/devel/create_filter.html">Create Custom Filters</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Appendix
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../../reference/index.html">Function Reference</a>
    </li>
    <li>
      <a href="../../../news/index.html">News</a>
    </li>
    <li>
      <a href="../../../articles/tutorial/devel/example_tasks.html">Example Tasks</a>
    </li>
    <li>
      <a href="../../../articles/tutorial/devel/integrated_learners.html">Integrated Learners</a>
    </li>
    <li>
      <a href="../../../articles/tutorial/devel/measures.html">Implemented Measures</a>
    </li>
    <li>
      <a href="../../../articles/tutorial/devel/filter_methods.html">Integrated Filter Methods</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    mlr-org Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://github.com/mlr-org/mlrMBO">mlrMBO</a>
    </li>
    <li>
      <a href="https://github.com/mlr-org/mlrng">mlrng</a>
    </li>
    <li>
      <a href="https://github.com/mlr-org/mlrCPO">mlrCPO</a>
    </li>
    <li>
      <a href="https://github.com/mlr-org/shinyMlr">shinyMlr</a>
    </li>
    <li>
      <a href="http://jakob-r.de/mlrHyperopt/index.html">mlrHyperopt</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mlr-org/mlr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-org.slack.com">
    <span class="fa fa-slack"></span>
     
  </a>
</li>
<li>
  <a href="https://stackoverflow.com/questions/tagged/mlr">
    <span class="fa fa-stack-overflow"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-org.github.io">
    <span class="fa fa-rss"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Resampling</h1>
            
          </div>

    
    
<div class="contents">
<p>Resampling strategies are usually used to assess the performance of a learning algorithm: The entire data set is (repeatedly) split into training sets <span class="math inline">\(D^{*b}\)</span> and test sets <span class="math inline">\(D \setminus D^{*b}\)</span>, <span class="math inline">\(b = 1,\ldots,B\)</span>. The learner is trained on each training set, predictions are made on the corresponding test set (sometimes on the training set as well) and the performance measure <span class="math inline">\(S(D^{*b}, D \setminus D^{*b})\)</span> is calculated. Then the <span class="math inline">\(B\)</span> individual performance values are aggregated, most often by calculating the mean. There exist various different resampling strategies, for example cross-validation and bootstrap, to mention just two popular approaches.</p>
<div class="figure" style="text-align: center">
<img src="https://raw.githubusercontent.com/pat-s/mlr/master/vignettes/tutorial/devel/pdf/img/resampling.png" alt="Resampling Figure" width="600px"><p class="caption">
Resampling Figure
</p>
</div>
<p>If you want to read up on further details, the paper <a href="http://link.springer.com/chapter/10.1007%2F978-0-387-47509-7_8">Resampling Strategies for Model Assessment and Selection</a> by Simon is probably not a bad choice. Bernd has also published a paper <a href="http://www.mitpressjournals.org/doi/pdf/10.1162/EVCO_a_00069">Resampling methods for meta-model validation with recommendations for evolutionary computation</a> which contains detailed descriptions and lots of statistical background information on resampling methods.</p>
<div id="defining-the-resampling-strategy" class="section level3">
<h3 class="hasAnchor">
<a href="#defining-the-resampling-strategy" class="anchor"></a>Defining the resampling strategy</h3>
<p>In <code>mlr</code> the resampling strategy can be defined via function <code><a href="../../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>. It requires a string that specifies the resampling method and, depending on the selected strategy, further information like the number of iterations. The supported resampling strategies are:</p>
<ul>
<li>Cross-validation (<code>"CV"</code>),</li>
<li>Leave-one-out cross-validation (<code>"LOO"</code>),</li>
<li>Repeated cross-validation (<code>"RepCV"</code>),</li>
<li>Out-of-bag bootstrap and other variants like <em>b632</em> (<code>"Bootstrap"</code>),</li>
<li>Subsampling, also called Monte-Carlo cross-validation (<code>"Subsample"</code>),</li>
<li>Holdout (training/test) (<code>"Holdout"</code>).</li>
</ul>
<p>For example if you want to use 3-fold cross-validation type:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">### 3-fold cross-validation</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">rdesc</a>
<a class="sourceLine" id="cb1-4" data-line-number="4">## Resample description: cross-validation with 3 iterations.</a>
<a class="sourceLine" id="cb1-5" data-line-number="5">## Predict: test</a>
<a class="sourceLine" id="cb1-6" data-line-number="6">## Stratification: FALSE</a></code></pre></div>
<p>For holdout estimation use:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">### Holdout estimation</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Holdout"</span>)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">rdesc</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">## Resample description: holdout with 0.67 split rate.</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">## Predict: test</a>
<a class="sourceLine" id="cb2-6" data-line-number="6">## Stratification: FALSE</a></code></pre></div>
<p>In order to save you some typing <code>mlr</code> contains some pre-defined resample descriptions for very common strategies like holdout (<code>hout</code> (<code><a href="../../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>)) as well as cross-validation with different numbers of folds (e.g., <code>cv5</code> (<code><a href="../../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>) or <code>cv10</code> (<code><a href="../../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>)).</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">hout</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">## Resample description: holdout with 0.67 split rate.</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">## Predict: test</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">## Stratification: FALSE</a>
<a class="sourceLine" id="cb3-5" data-line-number="5">cv3</a>
<a class="sourceLine" id="cb3-6" data-line-number="6">## Resample description: cross-validation with 3 iterations.</a>
<a class="sourceLine" id="cb3-7" data-line-number="7">## Predict: test</a>
<a class="sourceLine" id="cb3-8" data-line-number="8">## Stratification: FALSE</a></code></pre></div>
</div>
<div id="performing-the-resampling" class="section level3">
<h3 class="hasAnchor">
<a href="#performing-the-resampling" class="anchor"></a>Performing the resampling</h3>
<p>Function <code><a href="../../../reference/resample.html">resample()</a></code> evaluates a Learner (<code><a href="../../../reference/makeLearner.html">makeLearner()</a></code>) on a given machine learning <code><a href="../../../reference/Task.html">Task()</a></code> using the selected resampling strategy (<code><a href="../../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>).</p>
<p>As a first example, the performance of linear regression (<code><a href="http://www.rdocumentation.org/packages/stats/topics/lm">stats::lm()</a></code>) on the <code>BostonHousing</code> (<code><a href="http://www.rdocumentation.org/packages/mlbench/topics/BostonHousing">mlbench::BostonHousing()</a></code>) data set is calculated using <em>3-fold cross-validation</em>.</p>
<p>Generally, for <em><span class="math inline">\(K\)</span>-fold cross-validation</em> the data set <span class="math inline">\(D\)</span> is partitioned into <span class="math inline">\(K\)</span> subsets of (approximately) equal size. In the <span class="math inline">\(b\)</span>-th of the <span class="math inline">\(K\)</span> iterations, the <span class="math inline">\(b\)</span>-th subset is used for testing, while the union of the remaining parts forms the training set.</p>
<p>As usual, you can either pass a Learner (<code><a href="../../../reference/makeLearner.html">makeLearner()</a></code>) object to <code><a href="../../../reference/resample.html">resample()</a></code> or, as done here, provide the class name <code>"regr.lm"</code> of the learner. Since no performance measure is specified the default for regression learners (mean squared error, <a href="measures.html" target="_blank">mse</a>) is calculated.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">### Specify the resampling strategy (3-fold cross-validation)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"></a>
<a class="sourceLine" id="cb4-4" data-line-number="4">### Calculate the performance</a>
<a class="sourceLine" id="cb4-5" data-line-number="5">r =<span class="st"> </span><span class="kw"><a href="../../../reference/resample.html">resample</a></span>(<span class="st">"regr.lm"</span>, bh.task, rdesc)</a>
<a class="sourceLine" id="cb4-6" data-line-number="6">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb4-7" data-line-number="7">## Measures:             mse</a>
<a class="sourceLine" id="cb4-8" data-line-number="8">## [Resample] iter 1:    18.8065714</a>
<a class="sourceLine" id="cb4-9" data-line-number="9">## [Resample] iter 2:    31.8967256</a>
<a class="sourceLine" id="cb4-10" data-line-number="10">## [Resample] iter 3:    21.4897540</a>
<a class="sourceLine" id="cb4-11" data-line-number="11">## </a>
<a class="sourceLine" id="cb4-12" data-line-number="12">## Aggregated Result: mse.test.mean=24.0643504</a>
<a class="sourceLine" id="cb4-13" data-line-number="13">## </a>
<a class="sourceLine" id="cb4-14" data-line-number="14">r</a>
<a class="sourceLine" id="cb4-15" data-line-number="15">## Resample Result</a>
<a class="sourceLine" id="cb4-16" data-line-number="16">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb4-17" data-line-number="17">## Learner: regr.lm</a>
<a class="sourceLine" id="cb4-18" data-line-number="18">## Aggr perf: mse.test.mean=24.0643504</a>
<a class="sourceLine" id="cb4-19" data-line-number="19">## Runtime: 0.0555503</a></code></pre></div>
<p>The result <code>r</code> is an object of class <code><a href="../../../reference/resample.html">resample()</a></code> result. It contains performance results for the learner and some additional information like the runtime, predicted values, and optionally the models fitted in single resampling iterations.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">### Peak into r</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="kw">names</span>(r)</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">##  [1] "learner.id"     "task.id"        "task.desc"      "measures.train"</a>
<a class="sourceLine" id="cb5-4" data-line-number="4">##  [5] "measures.test"  "aggr"           "pred"           "models"        </a>
<a class="sourceLine" id="cb5-5" data-line-number="5">##  [9] "err.msgs"       "err.dumps"      "extract"        "runtime"</a>
<a class="sourceLine" id="cb5-6" data-line-number="6">r<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb5-7" data-line-number="7">## mse.test.mean </a>
<a class="sourceLine" id="cb5-8" data-line-number="8">##      24.06435</a>
<a class="sourceLine" id="cb5-9" data-line-number="9">r<span class="op">$</span>measures.test</a>
<a class="sourceLine" id="cb5-10" data-line-number="10">##   iter      mse</a>
<a class="sourceLine" id="cb5-11" data-line-number="11">## 1    1 18.80657</a>
<a class="sourceLine" id="cb5-12" data-line-number="12">## 2    2 31.89673</a>
<a class="sourceLine" id="cb5-13" data-line-number="13">## 3    3 21.48975</a></code></pre></div>
<p><code>r$measures.test</code> gives the performance on each of the 3 test data sets. <code>r$aggr</code> shows the aggregated performance value. Its name <code>"mse.test.mean"</code> indicates the performance measure, <a href="measures.html" target="_blank">mse</a>, and the method, <code>test.mean</code> (<code><a href="../../../reference/aggregations.html">aggregations()</a></code>), used to aggregate the 3 individual performances. <code>test.mean</code> (<code><a href="../../../reference/aggregations.html">aggregations()</a></code>) is the default aggregation scheme for most performance measures and, as the name implies, takes the mean over the performances on the test data sets.</p>
<p>Resampling in <code>mlr</code> works the same way for all types of learning problems and learners. Below is a classification example where a classification tree (rpart) (<code><a href="http://www.rdocumentation.org/packages/rpart/topics/rpart">rpart::rpart()</a></code>) is evaluated on the <code>Sonar</code> (<code>mlbench::sonar()</code>) data set by subsampling with 5 iterations.</p>
<p>In each subsampling iteration the data set <span class="math inline">\(D\)</span> is randomly partitioned into a training and a test set according to a given percentage, e.g., 2/3 training and 1/3 test set. If there is just one iteration, the strategy is commonly called <em>holdout</em> or <em>test sample estimation</em>.</p>
<p>You can calculate several measures at once by passing a <code>list</code> of Measures (<code><a href="../../../reference/makeMeasure.html">makeMeasure()</a></code>)s to <code><a href="../../../reference/resample.html">resample()</a></code>. Below, the error rate (<a href="measures.html" target="_blank">mmce</a>), false positive and false negative rates (<a href="measures.html" target="_blank">fpr</a>, <a href="measures.html" target="_blank">fnr</a>), and the time it takes to train the learner (<a href="measures.html" target="_blank">timetrain</a>) are estimated by <em>subsampling</em> with 5 iterations.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">### Subsampling with 5 iterations and default split ratio 2/3</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Subsample"</span>, <span class="dt">iters =</span> <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"></a>
<a class="sourceLine" id="cb6-4" data-line-number="4">### Subsampling with 5 iterations and 4/5 training data</a>
<a class="sourceLine" id="cb6-5" data-line-number="5">rdesc =<span class="st"> </span><span class="kw"><a href="../../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Subsample"</span>, <span class="dt">iters =</span> <span class="dv">5</span>, <span class="dt">split =</span> <span class="dv">4</span><span class="op">/</span><span class="dv">5</span>)</a>
<a class="sourceLine" id="cb6-6" data-line-number="6"></a>
<a class="sourceLine" id="cb6-7" data-line-number="7">### Classification tree with information splitting criterion</a>
<a class="sourceLine" id="cb6-8" data-line-number="8">lrn =<span class="st"> </span><span class="kw"><a href="../../../reference/makeLearner.html">makeLearner</a></span>(<span class="st">"classif.rpart"</span>, <span class="dt">parms =</span> <span class="kw">list</span>(<span class="dt">split =</span> <span class="st">"information"</span>))</a>
<a class="sourceLine" id="cb6-9" data-line-number="9"></a>
<a class="sourceLine" id="cb6-10" data-line-number="10">### Calculate the performance measures</a>
<a class="sourceLine" id="cb6-11" data-line-number="11">r =<span class="st"> </span><span class="kw"><a href="../../../reference/resample.html">resample</a></span>(lrn, sonar.task, rdesc, <span class="dt">measures =</span> <span class="kw">list</span>(mmce, fpr, fnr, timetrain))</a>
<a class="sourceLine" id="cb6-12" data-line-number="12">## Resampling: subsampling</a>
<a class="sourceLine" id="cb6-13" data-line-number="13">## Measures:             mmce        fpr         fnr         timetrain</a>
<a class="sourceLine" id="cb6-14" data-line-number="14">## [Resample] iter 1:    0.2380952   0.3636364   0.1000000   0.0190000</a>
<a class="sourceLine" id="cb6-15" data-line-number="15">## [Resample] iter 2:    0.1666667   0.0833333   0.2000000   0.0220000</a>
<a class="sourceLine" id="cb6-16" data-line-number="16">## [Resample] iter 3:    0.3095238   0.4347826   0.1578947   0.0190000</a>
<a class="sourceLine" id="cb6-17" data-line-number="17">## [Resample] iter 4:    0.3333333   0.2631579   0.3913043   0.0170000</a>
<a class="sourceLine" id="cb6-18" data-line-number="18">## [Resample] iter 5:    0.2142857   0.3809524   0.0476190   0.0170000</a>
<a class="sourceLine" id="cb6-19" data-line-number="19">## </a>
<a class="sourceLine" id="cb6-20" data-line-number="20">## Aggregated Result: mmce.test.mean=0.2523810,fpr.test.mean=0.3051725,fnr.test.mean=0.1793636,timetrain.test.mean=0.0188000</a>
<a class="sourceLine" id="cb6-21" data-line-number="21">## </a>
<a class="sourceLine" id="cb6-22" data-line-number="22">r</a>
<a class="sourceLine" id="cb6-23" data-line-number="23">## Resample Result</a>
<a class="sourceLine" id="cb6-24" data-line-number="24">## Task: Sonar-example</a>
<a class="sourceLine" id="cb6-25" data-line-number="25">## Learner: classif.rpart</a>
<a class="sourceLine" id="cb6-26" data-line-number="26">## Aggr perf: mmce.test.mean=0.2523810,fpr.test.mean=0.3051725,fnr.test.mean=0.1793636,timetrain.test.mean=0.0188000</a>
<a class="sourceLine" id="cb6-27" data-line-number="27">## Runtime: 0.17454</a></code></pre></div>
<p>If you want to add further measures afterwards, use <code><a href="../../../reference/addRRMeasure.html">addRRMeasure()</a></code>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">### Add balanced error rate (ber) and time used to predict</a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="kw"><a href="../../../reference/addRRMeasure.html">addRRMeasure</a></span>(r, <span class="kw">list</span>(ber, timepredict))</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">## Resample Result</a>
<a class="sourceLine" id="cb7-4" data-line-number="4">## Task: Sonar-example</a>
<a class="sourceLine" id="cb7-5" data-line-number="5">## Learner: classif.rpart</a>
<a class="sourceLine" id="cb7-6" data-line-number="6">## Aggr perf: mmce.test.mean=0.2523810,fpr.test.mean=0.3051725,fnr.test.mean=0.1793636,timetrain.test.mean=0.0188000,ber.test.mean=0.2422681,timepredict.test.mean=0.0062000</a>
<a class="sourceLine" id="cb7-7" data-line-number="7">## Runtime: 0.17454</a></code></pre></div>
<p>By default, <code><a href="../../../reference/resample.html">resample()</a></code> prints progress messages and intermediate results. You can turn this off by setting <code>show.info = FALSE</code>, as done in the code chunk below. (If you are interested in suppressing these messages permanently have a look at the tutorial page about <a href="configureMlr.html" target="_blank">configuring mlr</a>.)</p>
<p>In the above example, the Learner (<code><a href="../../../reference/makeLearner.html">makeLearner()</a></code>) was explicitly constructed. For convenience you can also specify the learner as a string and pass any learner parameters via the <code>...</code> argument of <code><a href="../../../reference/resample.html">resample()</a></code>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">r =<span class="st"> </span><span class="kw"><a href="../../../reference/resample.html">resample</a></span>(<span class="st">"classif.rpart"</span>, <span class="dt">parms =</span> <span class="kw">list</span>(<span class="dt">split =</span> <span class="st">"information"</span>), sonar.task, rdesc,</a>
<a class="sourceLine" id="cb8-2" data-line-number="2">  <span class="dt">measures =</span> <span class="kw">list</span>(mmce, fpr, fnr, timetrain), <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"></a>
<a class="sourceLine" id="cb8-4" data-line-number="4">r</a>
<a class="sourceLine" id="cb8-5" data-line-number="5">## Resample Result</a>
<a class="sourceLine" id="cb8-6" data-line-number="6">## Task: Sonar-example</a>
<a class="sourceLine" id="cb8-7" data-line-number="7">## Learner: classif.rpart</a>
<a class="sourceLine" id="cb8-8" data-line-number="8">## Aggr perf: mmce.test.mean=0.3380952,fpr.test.mean=0.4389015,fnr.test.mean=0.2262196,timetrain.test.mean=0.0172000</a>
<a class="sourceLine" id="cb8-9" data-line-number="9">## Runtime: 0.174329</a></code></pre></div>
</div>
<div id="accessing-resample-results" class="section level3">
<h3 class="hasAnchor">
<a href="#accessing-resample-results" class="anchor"></a>Accessing resample results</h3>
<p>Apart from the learner performance you can extract further information from the resample results, for example predicted values or the models fitted in individual resample iterations.</p>
<div id="predictions" class="section level4">
<h4 class="hasAnchor">
<a href="#predictions" class="anchor"></a>Predictions</h4>
<p>Per default, the <code><a href="../../../reference/resample.html">resample()</a></code> result contains the predictions made during the resampling. If you do not want to keep them, e.g., in order to conserve memory, set <code>keep.pred = FALSE</code> when calling <code><a href="../../../reference/resample.html">resample()</a></code>.</p>
<p>The predictions are stored in slot <code>$pred</code> of the resampling result, which can also be accessed by function <code><a href="../../../reference/getRRPredictions.html">getRRPredictions()</a></code>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">r<span class="op">$</span>pred</a>
<a class="sourceLine" id="cb9-2" data-line-number="2">## Resampled Prediction for:</a>
<a class="sourceLine" id="cb9-3" data-line-number="3">## Resample description: subsampling with 5 iterations and 0.80 split rate.</a>
<a class="sourceLine" id="cb9-4" data-line-number="4">## Predict: test</a>
<a class="sourceLine" id="cb9-5" data-line-number="5">## Stratification: FALSE</a>
<a class="sourceLine" id="cb9-6" data-line-number="6">## predict.type: response</a>
<a class="sourceLine" id="cb9-7" data-line-number="7">## threshold: </a>
<a class="sourceLine" id="cb9-8" data-line-number="8">## time (mean): 0.01</a>
<a class="sourceLine" id="cb9-9" data-line-number="9">##    id truth response iter  set</a>
<a class="sourceLine" id="cb9-10" data-line-number="10">## 1  51     R        M    1 test</a>
<a class="sourceLine" id="cb9-11" data-line-number="11">## 2 183     M        M    1 test</a>
<a class="sourceLine" id="cb9-12" data-line-number="12">## 3 147     M        M    1 test</a>
<a class="sourceLine" id="cb9-13" data-line-number="13">## 4 146     M        M    1 test</a>
<a class="sourceLine" id="cb9-14" data-line-number="14">## 5  26     R        M    1 test</a>
<a class="sourceLine" id="cb9-15" data-line-number="15">## 6  24     R        M    1 test</a>
<a class="sourceLine" id="cb9-16" data-line-number="16">## ... (#rows: 210, #cols: 5)</a>
<a class="sourceLine" id="cb9-17" data-line-number="17">pred =<span class="st"> </span><span class="kw"><a href="../../../reference/getRRPredictions.html">getRRPredictions</a></span>(r)</a>
<a class="sourceLine" id="cb9-18" data-line-number="18">pred</a>
<a class="sourceLine" id="cb9-19" data-line-number="19">## Resampled Prediction for:</a>
<a class="sourceLine" id="cb9-20" data-line-number="20">## Resample description: subsampling with 5 iterations and 0.80 split rate.</a>
<a class="sourceLine" id="cb9-21" data-line-number="21">## Predict: test</a>
<a class="sourceLine" id="cb9-22" data-line-number="22">## Stratification: FALSE</a>
<a class="sourceLine" id="cb9-23" data-line-number="23">## predict.type: response</a>
<a class="sourceLine" id="cb9-24" data-line-number="24">## threshold: </a>
<a class="sourceLine" id="cb9-25" data-line-number="25">## time (mean): 0.01</a>
<a class="sourceLine" id="cb9-26" data-line-number="26">##    id truth response iter  set</a>
<a class="sourceLine" id="cb9-27" data-line-number="27">## 1  51     R        M    1 test</a>
<a class="sourceLine" id="cb9-28" data-line-number="28">## 2 183     M        M    1 test</a>
<a class="sourceLine" id="cb9-29" data-line-number="29">## 3 147     M        M    1 test</a>
<a class="sourceLine" id="cb9-30" data-line-number="30">## 4 146     M        M    1 test</a>
<a class="sourceLine" id="cb9-31" data-line-number="31">## 5  26     R        M    1 test</a>
<a class="sourceLine" id="cb9-32" data-line-number="32">## 6  24     R        M    1 test</a>
<a class="sourceLine" id="cb9-33" data-line-number="33">## ... (#rows: 210, #cols: 5)</a></code></pre></div>
<p><code>pred</code> is an object of class <code><a href="../../../reference/resample.html">resample()</a></code> Prediction. Just as a <code><a href="../../../reference/Prediction.html">Prediction()</a></code> object (see the tutorial page on making <a href="predict.html" target="_blank">predictions</a> it has an element <code>$data</code> which is a <code>data.frame</code> that contains the predictions and in the case of a supervised learning problem the true values of the target variable(s). You can use <code>as.data.frame</code> (<code><a href="../../../reference/Prediction.html">Prediction()</a></code> to directly access the <code>$data</code> slot. Moreover, all getter functions for <code><a href="../../../reference/Prediction.html">Prediction()</a></code> objects like <code><a href="../../../reference/getPredictionResponse.html">getPredictionResponse()</a></code> or <code><a href="../../../reference/getPredictionProbabilities.html">getPredictionProbabilities()</a></code> are applicable.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw">head</span>(<span class="kw">as.data.frame</span>(pred))</a>
<a class="sourceLine" id="cb10-2" data-line-number="2">##    id truth response iter  set</a>
<a class="sourceLine" id="cb10-3" data-line-number="3">## 1  51     R        M    1 test</a>
<a class="sourceLine" id="cb10-4" data-line-number="4">## 2 183     M        M    1 test</a>
<a class="sourceLine" id="cb10-5" data-line-number="5">## 3 147     M        M    1 test</a>
<a class="sourceLine" id="cb10-6" data-line-number="6">## 4 146     M        M    1 test</a>
<a class="sourceLine" id="cb10-7" data-line-number="7">## 5  26     R        M    1 test</a>
<a class="sourceLine" id="cb10-8" data-line-number="8">## 6  24     R        M    1 test</a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="kw">head</span>(<span class="kw"><a href="../../../reference/getPredictionResponse.html">getPredictionTruth</a></span>(pred))</a>
<a class="sourceLine" id="cb10-10" data-line-number="10">## [1] R M M M R R</a>
<a class="sourceLine" id="cb10-11" data-line-number="11">## Levels: M R</a>
<a class="sourceLine" id="cb10-12" data-line-number="12"><span class="kw">head</span>(<span class="kw"><a href="../../../reference/getPredictionResponse.html">getPredictionResponse</a></span>(pred))</a>
<a class="sourceLine" id="cb10-13" data-line-number="13">## [1] M M M M M M</a>
<a class="sourceLine" id="cb10-14" data-line-number="14">## Levels: M R</a></code></pre></div>
<p>The columns <code>iter</code> and <code>set</code> in the <code>data.frame</code> indicate the resampling iteration and the data set (<code>train</code> or <code>test</code>) for which the prediction was made.</p>
<p>By default, predictions are made for the test sets only. If predictions for the training set are required, set <code>predict = "train"</code> (for predictions on the train set only) or <code>predict = "both"</code> (for predictions on both train and test sets) in <code><a href="../../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>. In any case, this is necessary for some bootstrap methods (<em>b632</em> and <em>b632+</em>) and some examples are shown later on.</p>
<p>Below, we use simple Holdout, i.e., split the data once into a training and test set, as resampling strategy and make predictions on both sets.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">### Make predictions on both training and test sets</a>
<a class="sourceLine" id="cb11-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Holdout"</span>, <span class="dt">predict =</span> <span class="st">"both"</span>)</a>
<a class="sourceLine" id="cb11-3" data-line-number="3"></a>
<a class="sourceLine" id="cb11-4" data-line-number="4">r =<span class="st"> </span><span class="kw"><a href="../../../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, iris.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb11-5" data-line-number="5">r</a>
<a class="sourceLine" id="cb11-6" data-line-number="6">## Resample Result</a>
<a class="sourceLine" id="cb11-7" data-line-number="7">## Task: iris-example</a>
<a class="sourceLine" id="cb11-8" data-line-number="8">## Learner: classif.lda</a>
<a class="sourceLine" id="cb11-9" data-line-number="9">## Aggr perf: mmce.test.mean=0.0400000</a>
<a class="sourceLine" id="cb11-10" data-line-number="10">## Runtime: 0.0210192</a>
<a class="sourceLine" id="cb11-11" data-line-number="11">r<span class="op">$</span>measures.train</a>
<a class="sourceLine" id="cb11-12" data-line-number="12">##   iter mmce</a>
<a class="sourceLine" id="cb11-13" data-line-number="13">## 1    1 0.01</a></code></pre></div>
<p>(Please note that nonetheless the misclassification rate <code>r$aggr</code> is estimated on the test data only. How to calculate performance measures on the training sets is shown below.)</p>
<p>A second function to extract predictions from resample results is <code><a href="../../../reference/getRRPredictionList.html">getRRPredictionList()</a></code> which returns a <code>list</code> of predictions split by data set (train/test) and resampling iteration.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">predList =<span class="st"> </span><span class="kw"><a href="../../../reference/getRRPredictionList.html">getRRPredictionList</a></span>(r)</a>
<a class="sourceLine" id="cb12-2" data-line-number="2">predList</a>
<a class="sourceLine" id="cb12-3" data-line-number="3">## $train</a>
<a class="sourceLine" id="cb12-4" data-line-number="4">## $train$`1`</a>
<a class="sourceLine" id="cb12-5" data-line-number="5">## Prediction: 100 observations</a>
<a class="sourceLine" id="cb12-6" data-line-number="6">## predict.type: response</a>
<a class="sourceLine" id="cb12-7" data-line-number="7">## threshold: </a>
<a class="sourceLine" id="cb12-8" data-line-number="8">## time: 0.00</a>
<a class="sourceLine" id="cb12-9" data-line-number="9">##      id      truth   response</a>
<a class="sourceLine" id="cb12-10" data-line-number="10">## 77   77 versicolor versicolor</a>
<a class="sourceLine" id="cb12-11" data-line-number="11">## 55   55 versicolor versicolor</a>
<a class="sourceLine" id="cb12-12" data-line-number="12">## 150 150  virginica  virginica</a>
<a class="sourceLine" id="cb12-13" data-line-number="13">## 112 112  virginica  virginica</a>
<a class="sourceLine" id="cb12-14" data-line-number="14">## 119 119  virginica  virginica</a>
<a class="sourceLine" id="cb12-15" data-line-number="15">## 89   89 versicolor versicolor</a>
<a class="sourceLine" id="cb12-16" data-line-number="16">## ... (#rows: 100, #cols: 3)</a>
<a class="sourceLine" id="cb12-17" data-line-number="17">## </a>
<a class="sourceLine" id="cb12-18" data-line-number="18">## </a>
<a class="sourceLine" id="cb12-19" data-line-number="19">## $test</a>
<a class="sourceLine" id="cb12-20" data-line-number="20">## $test$`1`</a>
<a class="sourceLine" id="cb12-21" data-line-number="21">## Prediction: 50 observations</a>
<a class="sourceLine" id="cb12-22" data-line-number="22">## predict.type: response</a>
<a class="sourceLine" id="cb12-23" data-line-number="23">## threshold: </a>
<a class="sourceLine" id="cb12-24" data-line-number="24">## time: 0.00</a>
<a class="sourceLine" id="cb12-25" data-line-number="25">##      id      truth  response</a>
<a class="sourceLine" id="cb12-26" data-line-number="26">## 101 101  virginica virginica</a>
<a class="sourceLine" id="cb12-27" data-line-number="27">## 50   50     setosa    setosa</a>
<a class="sourceLine" id="cb12-28" data-line-number="28">## 8     8     setosa    setosa</a>
<a class="sourceLine" id="cb12-29" data-line-number="29">## 15   15     setosa    setosa</a>
<a class="sourceLine" id="cb12-30" data-line-number="30">## 129 129  virginica virginica</a>
<a class="sourceLine" id="cb12-31" data-line-number="31">## 71   71 versicolor virginica</a>
<a class="sourceLine" id="cb12-32" data-line-number="32">## ... (#rows: 50, #cols: 3)</a></code></pre></div>
</div>
<div id="learner-models" class="section level4">
<h4 class="hasAnchor">
<a href="#learner-models" class="anchor"></a>Learner models</h4>
<p>In each resampling iteration a Learner (<code><a href="../../../reference/makeLearner.html">makeLearner()</a></code>) is fitted on the respective training set. By default, the resulting <code>WrappedModel</code> (<code><a href="../../../reference/makeWrappedModel.html">makeWrappedModel()</a></code>)s are not included in the <code><a href="../../../reference/resample.html">resample()</a></code> result and slot <code>$models</code> is empty. In order to keep them, set <code>models = TRUE</code> when calling <code><a href="../../../reference/resample.html">resample()</a></code>, as in the following survival analysis example.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">### 3-fold cross-validation</a>
<a class="sourceLine" id="cb13-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb13-3" data-line-number="3"></a>
<a class="sourceLine" id="cb13-4" data-line-number="4">r =<span class="st"> </span><span class="kw"><a href="../../../reference/resample.html">resample</a></span>(<span class="st">"surv.coxph"</span>, lung.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>, <span class="dt">models =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb13-5" data-line-number="5">r<span class="op">$</span>models</a>
<a class="sourceLine" id="cb13-6" data-line-number="6">## [[1]]</a>
<a class="sourceLine" id="cb13-7" data-line-number="7">## Model for learner.id=surv.coxph; learner.class=surv.coxph</a>
<a class="sourceLine" id="cb13-8" data-line-number="8">## Trained on: task.id = lung-example; obs = 112; features = 8</a>
<a class="sourceLine" id="cb13-9" data-line-number="9">## Hyperparameters: </a>
<a class="sourceLine" id="cb13-10" data-line-number="10">## </a>
<a class="sourceLine" id="cb13-11" data-line-number="11">## [[2]]</a>
<a class="sourceLine" id="cb13-12" data-line-number="12">## Model for learner.id=surv.coxph; learner.class=surv.coxph</a>
<a class="sourceLine" id="cb13-13" data-line-number="13">## Trained on: task.id = lung-example; obs = 111; features = 8</a>
<a class="sourceLine" id="cb13-14" data-line-number="14">## Hyperparameters: </a>
<a class="sourceLine" id="cb13-15" data-line-number="15">## </a>
<a class="sourceLine" id="cb13-16" data-line-number="16">## [[3]]</a>
<a class="sourceLine" id="cb13-17" data-line-number="17">## Model for learner.id=surv.coxph; learner.class=surv.coxph</a>
<a class="sourceLine" id="cb13-18" data-line-number="18">## Trained on: task.id = lung-example; obs = 111; features = 8</a>
<a class="sourceLine" id="cb13-19" data-line-number="19">## Hyperparameters:</a></code></pre></div>
</div>
<div id="the-extract-option" class="section level4">
<h4 class="hasAnchor">
<a href="#the-extract-option" class="anchor"></a>The extract option</h4>
<p>Keeping complete fitted models can be memory-intensive if these objects are large or the number of resampling iterations is high. Alternatively, you can use the <code>extract</code> argument of <code><a href="../../../reference/resample.html">resample()</a></code> to retain only the information you need. To this end you need to pass a function to <code>extract</code> which is applied to each <code>WrappedModel</code> (<code><a href="../../../reference/makeWrappedModel.html">makeWrappedModel()</a></code>) object fitted in each resampling iteration.</p>
<p>Below, we cluster the <code><a href="http://www.rdocumentation.org/packages/datasets/topics/mtcars">datasets::mtcars()</a></code> data using the <span class="math inline">\(k\)</span>-means algorithm with <span class="math inline">\(k = 3\)</span> and keep only the cluster centers.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">### 3-fold cross-validation</a>
<a class="sourceLine" id="cb14-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb14-3" data-line-number="3"></a>
<a class="sourceLine" id="cb14-4" data-line-number="4">### Extract the compute cluster centers</a>
<a class="sourceLine" id="cb14-5" data-line-number="5">r =<span class="st"> </span><span class="kw"><a href="../../../reference/resample.html">resample</a></span>(<span class="st">"cluster.kmeans"</span>, mtcars.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb14-6" data-line-number="6">  <span class="dt">centers =</span> <span class="dv">3</span>, <span class="dt">extract =</span> <span class="cf">function</span>(x) <span class="kw"><a href="../../../reference/getLearnerModel.html">getLearnerModel</a></span>(x)<span class="op">$</span>centers)</a>
<a class="sourceLine" id="cb14-7" data-line-number="7">## Warning in rgl.init(initValue, onlyNULL): RGL: unable to open X11 display</a>
<a class="sourceLine" id="cb14-8" data-line-number="8">## Warning: 'rgl_init' failed, running with rgl.useNULL = TRUE</a>
<a class="sourceLine" id="cb14-9" data-line-number="9">## </a>
<a class="sourceLine" id="cb14-10" data-line-number="10">## This is package 'modeest' written by P. PONCET.</a>
<a class="sourceLine" id="cb14-11" data-line-number="11">## For a complete list of functions, use 'library(help = "modeest")' or 'help.start()'.</a>
<a class="sourceLine" id="cb14-12" data-line-number="12">r<span class="op">$</span>extract</a>
<a class="sourceLine" id="cb14-13" data-line-number="13">## [[1]]</a>
<a class="sourceLine" id="cb14-14" data-line-number="14">##        mpg      cyl     disp        hp     drat       wt     qsec</a>
<a class="sourceLine" id="cb14-15" data-line-number="15">## 1 24.84444 4.444444 122.0111  91.77778 4.017778 2.540333 19.19444</a>
<a class="sourceLine" id="cb14-16" data-line-number="16">## 2 14.64286 8.000000 404.7143 215.57143 3.334286 4.330571 16.74286</a>
<a class="sourceLine" id="cb14-17" data-line-number="17">## 3 17.32000 7.200000 270.5200 145.00000 2.948000 3.609000 18.38600</a>
<a class="sourceLine" id="cb14-18" data-line-number="18">##          vs        am     gear     carb</a>
<a class="sourceLine" id="cb14-19" data-line-number="19">## 1 0.8888889 0.5555556 4.000000 2.222222</a>
<a class="sourceLine" id="cb14-20" data-line-number="20">## 2 0.0000000 0.1428571 3.285714 3.428571</a>
<a class="sourceLine" id="cb14-21" data-line-number="21">## 3 0.4000000 0.0000000 3.000000 2.000000</a>
<a class="sourceLine" id="cb14-22" data-line-number="22">## </a>
<a class="sourceLine" id="cb14-23" data-line-number="23">## [[2]]</a>
<a class="sourceLine" id="cb14-24" data-line-number="24">##        mpg cyl     disp    hp     drat       wt     qsec        vs</a>
<a class="sourceLine" id="cb14-25" data-line-number="25">## 1 15.33333   8 326.9333 200.0 3.105556 3.818333 16.95667 0.0000000</a>
<a class="sourceLine" id="cb14-26" data-line-number="26">## 2 19.96667   6 157.5333 136.0 3.813333 2.943333 16.75333 0.3333333</a>
<a class="sourceLine" id="cb14-27" data-line-number="27">## 3 25.94000   4 108.5400  84.4 4.056000 2.330800 19.06100 0.9000000</a>
<a class="sourceLine" id="cb14-28" data-line-number="28">##          am     gear     carb</a>
<a class="sourceLine" id="cb14-29" data-line-number="29">## 1 0.1111111 3.222222 3.444444</a>
<a class="sourceLine" id="cb14-30" data-line-number="30">## 2 0.6666667 4.333333 4.666667</a>
<a class="sourceLine" id="cb14-31" data-line-number="31">## 3 0.7000000 4.100000 1.600000</a>
<a class="sourceLine" id="cb14-32" data-line-number="32">## </a>
<a class="sourceLine" id="cb14-33" data-line-number="33">## [[3]]</a>
<a class="sourceLine" id="cb14-34" data-line-number="34">##        mpg cyl     disp       hp  drat       wt     qsec  vs        am</a>
<a class="sourceLine" id="cb14-35" data-line-number="35">## 1 18.00000   7 265.7000 136.2500 3.015 3.460000 18.64000 0.5 0.0000000</a>
<a class="sourceLine" id="cb14-36" data-line-number="36">## 2 24.11000   5 125.7300 102.2000 3.992 2.557500 17.97600 0.6 0.8000000</a>
<a class="sourceLine" id="cb14-37" data-line-number="37">## 3 14.67143   8 380.2857 244.1429 3.430 4.109143 16.09143 0.0 0.2857143</a>
<a class="sourceLine" id="cb14-38" data-line-number="38">##       gear     carb</a>
<a class="sourceLine" id="cb14-39" data-line-number="39">## 1 3.000000 1.750000</a>
<a class="sourceLine" id="cb14-40" data-line-number="40">## 2 4.200000 2.800000</a>
<a class="sourceLine" id="cb14-41" data-line-number="41">## 3 3.571429 4.285714</a></code></pre></div>
<p>As a second example, we extract the variable importances from fitted regression trees using function <code><a href="../../../reference/getFeatureImportance.html">getFeatureImportance()</a></code>. (For more detailed information on this topic see the <a href="feature_selection.html" target="_blank">feature selection</a> page.)</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1">### Extract the variable importance in a regression tree</a>
<a class="sourceLine" id="cb15-2" data-line-number="2">r =<span class="st"> </span><span class="kw"><a href="../../../reference/resample.html">resample</a></span>(<span class="st">"regr.rpart"</span>, bh.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>, <span class="dt">extract =</span> getFeatureImportance)</a>
<a class="sourceLine" id="cb15-3" data-line-number="3">r<span class="op">$</span>extract</a>
<a class="sourceLine" id="cb15-4" data-line-number="4">## [[1]]</a>
<a class="sourceLine" id="cb15-5" data-line-number="5">## FeatureImportance:</a>
<a class="sourceLine" id="cb15-6" data-line-number="6">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb15-7" data-line-number="7">## </a>
<a class="sourceLine" id="cb15-8" data-line-number="8">## Learner: regr.rpart</a>
<a class="sourceLine" id="cb15-9" data-line-number="9">## Measure: NA</a>
<a class="sourceLine" id="cb15-10" data-line-number="10">## Contrast: NA</a>
<a class="sourceLine" id="cb15-11" data-line-number="11">## Aggregation: function (x)  x</a>
<a class="sourceLine" id="cb15-12" data-line-number="12">## Replace: NA</a>
<a class="sourceLine" id="cb15-13" data-line-number="13">## Number of Monte-Carlo iterations: NA</a>
<a class="sourceLine" id="cb15-14" data-line-number="14">## Local: FALSE</a>
<a class="sourceLine" id="cb15-15" data-line-number="15">##       crim       zn    indus     chas      nox       rm      age      dis</a>
<a class="sourceLine" id="cb15-16" data-line-number="16">## 1 4664.692 3130.084 4982.816 37.62997 4571.726 11086.06 1022.807 1926.447</a>
<a class="sourceLine" id="cb15-17" data-line-number="17">##        rad      tax  ptratio        b    lstat</a>
<a class="sourceLine" id="cb15-18" data-line-number="18">## 1 177.0948 801.1986 2874.572 149.8239 16560.39</a>
<a class="sourceLine" id="cb15-19" data-line-number="19">## </a>
<a class="sourceLine" id="cb15-20" data-line-number="20">## [[2]]</a>
<a class="sourceLine" id="cb15-21" data-line-number="21">## FeatureImportance:</a>
<a class="sourceLine" id="cb15-22" data-line-number="22">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb15-23" data-line-number="23">## </a>
<a class="sourceLine" id="cb15-24" data-line-number="24">## Learner: regr.rpart</a>
<a class="sourceLine" id="cb15-25" data-line-number="25">## Measure: NA</a>
<a class="sourceLine" id="cb15-26" data-line-number="26">## Contrast: NA</a>
<a class="sourceLine" id="cb15-27" data-line-number="27">## Aggregation: function (x)  x</a>
<a class="sourceLine" id="cb15-28" data-line-number="28">## Replace: NA</a>
<a class="sourceLine" id="cb15-29" data-line-number="29">## Number of Monte-Carlo iterations: NA</a>
<a class="sourceLine" id="cb15-30" data-line-number="30">## Local: FALSE</a>
<a class="sourceLine" id="cb15-31" data-line-number="31">##       crim       zn    indus chas      nox       rm      age      dis</a>
<a class="sourceLine" id="cb15-32" data-line-number="32">## 1 8130.082 340.0989 8582.283    0 8534.535 11976.54 7887.079 2866.809</a>
<a class="sourceLine" id="cb15-33" data-line-number="33">##        rad      tax  ptratio b    lstat</a>
<a class="sourceLine" id="cb15-34" data-line-number="34">## 1 632.4563 1014.731 1081.635 0 17028.33</a>
<a class="sourceLine" id="cb15-35" data-line-number="35">## </a>
<a class="sourceLine" id="cb15-36" data-line-number="36">## [[3]]</a>
<a class="sourceLine" id="cb15-37" data-line-number="37">## FeatureImportance:</a>
<a class="sourceLine" id="cb15-38" data-line-number="38">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb15-39" data-line-number="39">## </a>
<a class="sourceLine" id="cb15-40" data-line-number="40">## Learner: regr.rpart</a>
<a class="sourceLine" id="cb15-41" data-line-number="41">## Measure: NA</a>
<a class="sourceLine" id="cb15-42" data-line-number="42">## Contrast: NA</a>
<a class="sourceLine" id="cb15-43" data-line-number="43">## Aggregation: function (x)  x</a>
<a class="sourceLine" id="cb15-44" data-line-number="44">## Replace: NA</a>
<a class="sourceLine" id="cb15-45" data-line-number="45">## Number of Monte-Carlo iterations: NA</a>
<a class="sourceLine" id="cb15-46" data-line-number="46">## Local: FALSE</a>
<a class="sourceLine" id="cb15-47" data-line-number="47">##       crim       zn    indus chas      nox       rm      age      dis</a>
<a class="sourceLine" id="cb15-48" data-line-number="48">## 1 3435.394 1410.685 7072.703    0 2284.919 20405.63 2555.893 2743.121</a>
<a class="sourceLine" id="cb15-49" data-line-number="49">##        rad      tax  ptratio        b    lstat</a>
<a class="sourceLine" id="cb15-50" data-line-number="50">## 1 694.1106 1842.661 3913.749 427.8425 13218.01</a></code></pre></div>
</div>
</div>
<div id="stratification-and-blocking" class="section level3">
<h3 class="hasAnchor">
<a href="#stratification-and-blocking" class="anchor"></a>Stratification and blocking</h3>
<ul>
<li><p><em>Stratification</em> with respect to a categorical variable makes sure that all its values are present in each training and test set in approximately the same proportion as in the original data set. Stratification is possible with regard to categorical target variables (and thus for supervised classification and survival analysis) or categorical explanatory variables.</p></li>
<li><p><em>Blocking</em> refers to the situation that subsets of observations belong together and must not be separated during resampling. Hence, for one train/test set pair the entire block is either in the training set or in the test set.</p></li>
</ul>
<div id="stratification-with-respect-to-the-target-variables" class="section level4">
<h4 class="hasAnchor">
<a href="#stratification-with-respect-to-the-target-variables" class="anchor"></a>Stratification with respect to the target variable(s)</h4>
<p>For classification, it is usually desirable to have the same proportion of the classes in all of the partitions of the original data set. This is particularly useful in the case of imbalanced classes and small data sets. Otherwise, it may happen that observations of less frequent classes are missing in some of the training sets which can decrease the performance of the learner, or lead to model crashes. In order to conduct stratified resampling, set <code>stratify = TRUE</code> in <code><a href="../../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1">### 3-fold cross-validation</a>
<a class="sourceLine" id="cb16-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">stratify =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb16-3" data-line-number="3"></a>
<a class="sourceLine" id="cb16-4" data-line-number="4">r =<span class="st"> </span><span class="kw"><a href="../../../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, iris.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb16-5" data-line-number="5">r</a>
<a class="sourceLine" id="cb16-6" data-line-number="6">## Resample Result</a>
<a class="sourceLine" id="cb16-7" data-line-number="7">## Task: iris-example</a>
<a class="sourceLine" id="cb16-8" data-line-number="8">## Learner: classif.lda</a>
<a class="sourceLine" id="cb16-9" data-line-number="9">## Aggr perf: mmce.test.mean=0.0265359</a>
<a class="sourceLine" id="cb16-10" data-line-number="10">## Runtime: 0.0307167</a></code></pre></div>
<p>Stratification is also available for survival tasks. Here the stratification balances the censoring rate.</p>
</div>
<div id="stratification-with-respect-to-explanatory-variables" class="section level4">
<h4 class="hasAnchor">
<a href="#stratification-with-respect-to-explanatory-variables" class="anchor"></a>Stratification with respect to explanatory variables</h4>
<p>Sometimes it is required to also stratify on the input data, e.g., to ensure that all subgroups are represented in all training and test sets. To stratify on the input columns, specify <code>factor</code> columns of your task data via <code>stratify.cols</code>.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1">rdesc =<span class="st"> </span><span class="kw"><a href="../../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">stratify.cols =</span> <span class="st">"chas"</span>)</a>
<a class="sourceLine" id="cb17-2" data-line-number="2"></a>
<a class="sourceLine" id="cb17-3" data-line-number="3">r =<span class="st"> </span><span class="kw"><a href="../../../reference/resample.html">resample</a></span>(<span class="st">"regr.rpart"</span>, bh.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb17-4" data-line-number="4">r</a>
<a class="sourceLine" id="cb17-5" data-line-number="5">## Resample Result</a>
<a class="sourceLine" id="cb17-6" data-line-number="6">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb17-7" data-line-number="7">## Learner: regr.rpart</a>
<a class="sourceLine" id="cb17-8" data-line-number="8">## Aggr perf: mse.test.mean=21.1266176</a>
<a class="sourceLine" id="cb17-9" data-line-number="9">## Runtime: 0.0484495</a></code></pre></div>
</div>
<div id="blocking" class="section level4">
<h4 class="hasAnchor">
<a href="#blocking" class="anchor"></a>Blocking</h4>
<p>If some observations “belong together” and must not be separated when splitting the data into training and test sets for resampling, you can supply this information via a <code>blocking</code> <code>factor</code> when creating the <a href="task.html" target="_blank">task</a>.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">### 5 blocks containing 30 observations each</a>
<a class="sourceLine" id="cb18-2" data-line-number="2">task =<span class="st"> </span><span class="kw"><a href="../../../reference/Task.html">makeClassifTask</a></span>(<span class="dt">data =</span> iris, <span class="dt">target =</span> <span class="st">"Species"</span>, <span class="dt">blocking =</span> <span class="kw">factor</span>(<span class="kw">rep</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dt">each =</span> <span class="dv">30</span>)))</a>
<a class="sourceLine" id="cb18-3" data-line-number="3">task</a>
<a class="sourceLine" id="cb18-4" data-line-number="4">## Supervised task: iris</a>
<a class="sourceLine" id="cb18-5" data-line-number="5">## Type: classif</a>
<a class="sourceLine" id="cb18-6" data-line-number="6">## Target: Species</a>
<a class="sourceLine" id="cb18-7" data-line-number="7">## Observations: 150</a>
<a class="sourceLine" id="cb18-8" data-line-number="8">## Features:</a>
<a class="sourceLine" id="cb18-9" data-line-number="9">##    numerics     factors     ordered functionals </a>
<a class="sourceLine" id="cb18-10" data-line-number="10">##           4           0           0           0 </a>
<a class="sourceLine" id="cb18-11" data-line-number="11">## Missings: FALSE</a>
<a class="sourceLine" id="cb18-12" data-line-number="12">## Has weights: FALSE</a>
<a class="sourceLine" id="cb18-13" data-line-number="13">## Has blocking: TRUE</a>
<a class="sourceLine" id="cb18-14" data-line-number="14">## Has coordinates: FALSE</a>
<a class="sourceLine" id="cb18-15" data-line-number="15">## Classes: 3</a>
<a class="sourceLine" id="cb18-16" data-line-number="16">##     setosa versicolor  virginica </a>
<a class="sourceLine" id="cb18-17" data-line-number="17">##         50         50         50 </a>
<a class="sourceLine" id="cb18-18" data-line-number="18">## Positive class: NA</a></code></pre></div>
</div>
</div>
<div id="resample-descriptions-and-resample-instances" class="section level3">
<h3 class="hasAnchor">
<a href="#resample-descriptions-and-resample-instances" class="anchor"></a>Resample descriptions and resample instances</h3>
<p>As already mentioned, you can specify a resampling strategy using function <code><a href="../../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1">rdesc =<span class="st"> </span><span class="kw"><a href="../../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb19-2" data-line-number="2">rdesc</a>
<a class="sourceLine" id="cb19-3" data-line-number="3">## Resample description: cross-validation with 3 iterations.</a>
<a class="sourceLine" id="cb19-4" data-line-number="4">## Predict: test</a>
<a class="sourceLine" id="cb19-5" data-line-number="5">## Stratification: FALSE</a>
<a class="sourceLine" id="cb19-6" data-line-number="6"><span class="kw">str</span>(rdesc)</a>
<a class="sourceLine" id="cb19-7" data-line-number="7">## List of 4</a>
<a class="sourceLine" id="cb19-8" data-line-number="8">##  $ id      : chr "cross-validation"</a>
<a class="sourceLine" id="cb19-9" data-line-number="9">##  $ iters   : int 3</a>
<a class="sourceLine" id="cb19-10" data-line-number="10">##  $ predict : chr "test"</a>
<a class="sourceLine" id="cb19-11" data-line-number="11">##  $ stratify: logi FALSE</a>
<a class="sourceLine" id="cb19-12" data-line-number="12">##  - attr(*, "class")= chr [1:2] "CVDesc" "ResampleDesc"</a>
<a class="sourceLine" id="cb19-13" data-line-number="13"><span class="kw">str</span>(<span class="kw"><a href="../../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Subsample"</span>, <span class="dt">stratify.cols =</span> <span class="st">"chas"</span>))</a>
<a class="sourceLine" id="cb19-14" data-line-number="14">## List of 6</a>
<a class="sourceLine" id="cb19-15" data-line-number="15">##  $ split        : num 0.667</a>
<a class="sourceLine" id="cb19-16" data-line-number="16">##  $ id           : chr "subsampling"</a>
<a class="sourceLine" id="cb19-17" data-line-number="17">##  $ iters        : int 30</a>
<a class="sourceLine" id="cb19-18" data-line-number="18">##  $ predict      : chr "test"</a>
<a class="sourceLine" id="cb19-19" data-line-number="19">##  $ stratify     : logi FALSE</a>
<a class="sourceLine" id="cb19-20" data-line-number="20">##  $ stratify.cols: chr "chas"</a>
<a class="sourceLine" id="cb19-21" data-line-number="21">##  - attr(*, "class")= chr [1:2] "SubsampleDesc" "ResampleDesc"</a></code></pre></div>
<p>The result <code>rdesc</code> inherits from class <code>ResampleDesc</code> (<code><a href="../../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>) (short for resample description) and, in principle, contains all necessary information about the resampling strategy including the number of iterations, the proportion of training and test sets, stratification variables, etc.</p>
<p>Given either the size of the data set at hand or the <code><a href="../../../reference/Task.html">Task()</a></code>, function <code><a href="../../../reference/makeResampleInstance.html">makeResampleInstance()</a></code> draws the training and test sets according to the <code>ResampleDesc</code> (<code><a href="../../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>).</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1">### Create a resample instance based an a task</a>
<a class="sourceLine" id="cb20-2" data-line-number="2">rin =<span class="st"> </span><span class="kw"><a href="../../../reference/makeResampleInstance.html">makeResampleInstance</a></span>(rdesc, iris.task)</a>
<a class="sourceLine" id="cb20-3" data-line-number="3">rin</a>
<a class="sourceLine" id="cb20-4" data-line-number="4">## Resample instance for 150 cases.</a>
<a class="sourceLine" id="cb20-5" data-line-number="5">## Resample description: cross-validation with 3 iterations.</a>
<a class="sourceLine" id="cb20-6" data-line-number="6">## Predict: test</a>
<a class="sourceLine" id="cb20-7" data-line-number="7">## Stratification: FALSE</a>
<a class="sourceLine" id="cb20-8" data-line-number="8"><span class="kw">str</span>(rin)</a>
<a class="sourceLine" id="cb20-9" data-line-number="9">## List of 5</a>
<a class="sourceLine" id="cb20-10" data-line-number="10">##  $ desc      :List of 4</a>
<a class="sourceLine" id="cb20-11" data-line-number="11">##   ..$ id      : chr "cross-validation"</a>
<a class="sourceLine" id="cb20-12" data-line-number="12">##   ..$ iters   : int 3</a>
<a class="sourceLine" id="cb20-13" data-line-number="13">##   ..$ predict : chr "test"</a>
<a class="sourceLine" id="cb20-14" data-line-number="14">##   ..$ stratify: logi FALSE</a>
<a class="sourceLine" id="cb20-15" data-line-number="15">##   ..- attr(*, "class")= chr [1:2] "CVDesc" "ResampleDesc"</a>
<a class="sourceLine" id="cb20-16" data-line-number="16">##  $ size      : int 150</a>
<a class="sourceLine" id="cb20-17" data-line-number="17">##  $ train.inds:List of 3</a>
<a class="sourceLine" id="cb20-18" data-line-number="18">##   ..$ : int [1:100] 51 37 128 110 98 14 99 117 139 42 ...</a>
<a class="sourceLine" id="cb20-19" data-line-number="19">##   ..$ : int [1:100] 51 71 37 128 14 77 99 57 16 133 ...</a>
<a class="sourceLine" id="cb20-20" data-line-number="20">##   ..$ : int [1:100] 71 110 98 77 117 57 139 16 42 69 ...</a>
<a class="sourceLine" id="cb20-21" data-line-number="21">##  $ test.inds :List of 3</a>
<a class="sourceLine" id="cb20-22" data-line-number="22">##   ..$ : int [1:50] 8 16 18 23 25 26 28 30 32 33 ...</a>
<a class="sourceLine" id="cb20-23" data-line-number="23">##   ..$ : int [1:50] 2 3 4 5 11 12 13 17 29 31 ...</a>
<a class="sourceLine" id="cb20-24" data-line-number="24">##   ..$ : int [1:50] 1 6 7 9 10 14 15 19 20 21 ...</a>
<a class="sourceLine" id="cb20-25" data-line-number="25">##  $ group     : Factor w/ 0 levels: </a>
<a class="sourceLine" id="cb20-26" data-line-number="26">##  - attr(*, "class")= chr "ResampleInstance"</a>
<a class="sourceLine" id="cb20-27" data-line-number="27">### Create a resample instance given the size of the data set</a>
<a class="sourceLine" id="cb20-28" data-line-number="28">rin =<span class="st"> </span><span class="kw"><a href="../../../reference/makeResampleInstance.html">makeResampleInstance</a></span>(rdesc, <span class="dt">size =</span> <span class="kw">nrow</span>(iris))</a>
<a class="sourceLine" id="cb20-29" data-line-number="29"><span class="kw">str</span>(rin)</a>
<a class="sourceLine" id="cb20-30" data-line-number="30">## List of 5</a>
<a class="sourceLine" id="cb20-31" data-line-number="31">##  $ desc      :List of 4</a>
<a class="sourceLine" id="cb20-32" data-line-number="32">##   ..$ id      : chr "cross-validation"</a>
<a class="sourceLine" id="cb20-33" data-line-number="33">##   ..$ iters   : int 3</a>
<a class="sourceLine" id="cb20-34" data-line-number="34">##   ..$ predict : chr "test"</a>
<a class="sourceLine" id="cb20-35" data-line-number="35">##   ..$ stratify: logi FALSE</a>
<a class="sourceLine" id="cb20-36" data-line-number="36">##   ..- attr(*, "class")= chr [1:2] "CVDesc" "ResampleDesc"</a>
<a class="sourceLine" id="cb20-37" data-line-number="37">##  $ size      : int 150</a>
<a class="sourceLine" id="cb20-38" data-line-number="38">##  $ train.inds:List of 3</a>
<a class="sourceLine" id="cb20-39" data-line-number="39">##   ..$ : int [1:100] 119 32 26 33 116 87 132 31 27 128 ...</a>
<a class="sourceLine" id="cb20-40" data-line-number="40">##   ..$ : int [1:100] 150 119 69 122 26 33 116 87 132 80 ...</a>
<a class="sourceLine" id="cb20-41" data-line-number="41">##   ..$ : int [1:100] 150 69 122 32 80 109 118 10 43 76 ...</a>
<a class="sourceLine" id="cb20-42" data-line-number="42">##  $ test.inds :List of 3</a>
<a class="sourceLine" id="cb20-43" data-line-number="43">##   ..$ : int [1:50] 1 5 8 12 13 20 21 28 29 34 ...</a>
<a class="sourceLine" id="cb20-44" data-line-number="44">##   ..$ : int [1:50] 2 3 4 7 9 10 11 14 16 17 ...</a>
<a class="sourceLine" id="cb20-45" data-line-number="45">##   ..$ : int [1:50] 6 15 19 22 23 24 26 27 30 31 ...</a>
<a class="sourceLine" id="cb20-46" data-line-number="46">##  $ group     : Factor w/ 0 levels: </a>
<a class="sourceLine" id="cb20-47" data-line-number="47">##  - attr(*, "class")= chr "ResampleInstance"</a>
<a class="sourceLine" id="cb20-48" data-line-number="48">### Access the indices of the training observations in iteration 3</a>
<a class="sourceLine" id="cb20-49" data-line-number="49">rin<span class="op">$</span>train.inds[[<span class="dv">3</span>]]</a>
<a class="sourceLine" id="cb20-50" data-line-number="50">##   [1] 150  69 122  32  80 109 118  10  43  76 120  42 104   8 139  29  71</a>
<a class="sourceLine" id="cb20-51" data-line-number="51">##  [18] 115 126 103  86  46 143 121 146   9 133  21 114 102  12 149 123 138</a>
<a class="sourceLine" id="cb20-52" data-line-number="52">##  [35]  13  88 117   3  14  55  85  59  74  92  39  52  37  28 105  45  70</a>
<a class="sourceLine" id="cb20-53" data-line-number="53">##  [52]  58  20  90  93 145   4  11  17  38  57  54  95  35  41  16  81 127</a>
<a class="sourceLine" id="cb20-54" data-line-number="54">##  [69]  68  94  77   7 147   2 106 148  25   5  65  84  89 101  75 136  49</a>
<a class="sourceLine" id="cb20-55" data-line-number="55">##  [86] 112   1  53  18  40  34  97  96 144 108 113  64  98  56 141</a></code></pre></div>
<p>The result <code>rin</code> inherits from class <code>ResampleInstance</code> (<code><a href="../../../reference/makeResampleInstance.html">makeResampleInstance()</a></code>) and contains <code>list</code>s of index vectors for the train and test sets.</p>
<p>If a <code>ResampleDesc</code> (<code><a href="../../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>) is passed to <code><a href="../../../reference/resample.html">resample()</a></code>, it is instantiated internally. Naturally, it is also possible to pass a <code>ResampleInstance</code> (<code><a href="../../../reference/makeResampleInstance.html">makeResampleInstance()</a></code>) directly.</p>
<p>While the separation between resample descriptions, resample instances, and the <code><a href="../../../reference/resample.html">resample()</a></code> function itself seems overly complicated, it has several advantages:</p>
<ul>
<li>Resample instances readily allow for paired experiments, that is comparing the performance of several learners on exactly the same training and test sets. This is particularly useful if you want to add another method to a comparison experiment you already did. Moreover, you can store the resample instance along with your data in order to be able to reproduce your results later on.</li>
</ul>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1">rdesc =<span class="st"> </span><span class="kw"><a href="../../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb21-2" data-line-number="2">rin =<span class="st"> </span><span class="kw"><a href="../../../reference/makeResampleInstance.html">makeResampleInstance</a></span>(rdesc, <span class="dt">task =</span> iris.task)</a>
<a class="sourceLine" id="cb21-3" data-line-number="3"></a>
<a class="sourceLine" id="cb21-4" data-line-number="4">### Calculate the performance of two learners based on the same resample instance</a>
<a class="sourceLine" id="cb21-5" data-line-number="5">r.lda =<span class="st"> </span><span class="kw"><a href="../../../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, iris.task, rin, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb21-6" data-line-number="6">r.rpart =<span class="st"> </span><span class="kw"><a href="../../../reference/resample.html">resample</a></span>(<span class="st">"classif.rpart"</span>, iris.task, rin, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb21-7" data-line-number="7">r.lda<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb21-8" data-line-number="8">## mmce.test.mean </a>
<a class="sourceLine" id="cb21-9" data-line-number="9">##     0.02666667</a>
<a class="sourceLine" id="cb21-10" data-line-number="10">r.rpart<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb21-11" data-line-number="11">## mmce.test.mean </a>
<a class="sourceLine" id="cb21-12" data-line-number="12">##           0.06</a></code></pre></div>
<ul>
<li>In order to add further resampling methods you can simply derive from the <code>ResampleDesc</code> (<code><a href="../../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>) and <code>ResampleInstance</code> (<code><a href="../../../reference/makeResampleInstance.html">makeResampleInstance()</a></code>) classes, but you do neither have to touch <code><a href="../../../reference/resample.html">resample()</a></code> nor any further methods that use the resampling strategy.</li>
</ul>
<p>Usually, when calling <code><a href="../../../reference/makeResampleInstance.html">makeResampleInstance()</a></code> the train and test index sets are drawn randomly. Mainly for <em>holdout</em> (<em>test sample</em>) <em>estimation</em> you might want full control about the training and tests set and specify them manually. This can be done using function <code><a href="../../../reference/makeFixedHoldoutInstance.html">makeFixedHoldoutInstance()</a></code>.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">rin =<span class="st"> </span><span class="kw"><a href="../../../reference/makeFixedHoldoutInstance.html">makeFixedHoldoutInstance</a></span>(<span class="dt">train.inds =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="dt">test.inds =</span> <span class="dv">101</span><span class="op">:</span><span class="dv">150</span>, <span class="dt">size =</span> <span class="dv">150</span>)</a>
<a class="sourceLine" id="cb22-2" data-line-number="2">rin</a>
<a class="sourceLine" id="cb22-3" data-line-number="3">## Resample instance for 150 cases.</a>
<a class="sourceLine" id="cb22-4" data-line-number="4">## Resample description: holdout with 0.67 split rate.</a>
<a class="sourceLine" id="cb22-5" data-line-number="5">## Predict: test</a>
<a class="sourceLine" id="cb22-6" data-line-number="6">## Stratification: FALSE</a></code></pre></div>
</div>
<div id="aggregating-performance-values" class="section level3">
<h3 class="hasAnchor">
<a href="#aggregating-performance-values" class="anchor"></a>Aggregating performance values</h3>
<p>In each resampling iteration <span class="math inline">\(b = 1,\ldots,B\)</span> we get performance values <span class="math inline">\(S(D^{*b}, D \setminus D^{*b})\)</span> (for each measure we wish to calculate), which are then aggregated to an overall performance.</p>
<p>For the great majority of common resampling strategies (like holdout, cross-validation, subsampling) performance values are calculated on the test data sets only and for most measures aggregated by taking the mean (<code>test.mean</code>(<code><a href="../../../reference/aggregations.html">aggregations()</a></code>)).</p>
<p>Each performance <code>Measure</code> (<code><a href="../../../reference/makeMeasure.html">makeMeasure()</a></code>) in <code>mlr</code> has a corresponding default aggregation method which is stored in slot <code>$aggr</code>. The default aggregation for most measures is <code>test.mean</code>(<code><a href="../../../reference/aggregations.html">aggregations()</a></code>). One exception is the root mean square error (<a href="measures.html" target="_blank">rmse</a>).</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1">### Mean misclassification error</a>
<a class="sourceLine" id="cb23-2" data-line-number="2">mmce<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb23-3" data-line-number="3">## Aggregation function: test.mean</a>
<a class="sourceLine" id="cb23-4" data-line-number="4">mmce<span class="op">$</span>aggr<span class="op">$</span>fun</a>
<a class="sourceLine" id="cb23-5" data-line-number="5">## function (task, perf.test, perf.train, measure, group, pred) </a>
<a class="sourceLine" id="cb23-6" data-line-number="6">## mean(perf.test)</a>
<a class="sourceLine" id="cb23-7" data-line-number="7">## &lt;bytecode: 0x8ade3d8&gt;</a>
<a class="sourceLine" id="cb23-8" data-line-number="8">## &lt;environment: namespace:mlr&gt;</a>
<a class="sourceLine" id="cb23-9" data-line-number="9">### Root mean square error</a>
<a class="sourceLine" id="cb23-10" data-line-number="10">rmse<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb23-11" data-line-number="11">## Aggregation function: test.rmse</a>
<a class="sourceLine" id="cb23-12" data-line-number="12">rmse<span class="op">$</span>aggr<span class="op">$</span>fun</a>
<a class="sourceLine" id="cb23-13" data-line-number="13">## function (task, perf.test, perf.train, measure, group, pred) </a>
<a class="sourceLine" id="cb23-14" data-line-number="14">## sqrt(mean(perf.test^2))</a>
<a class="sourceLine" id="cb23-15" data-line-number="15">## &lt;bytecode: 0xa27f8e8&gt;</a>
<a class="sourceLine" id="cb23-16" data-line-number="16">## &lt;environment: namespace:mlr&gt;</a></code></pre></div>
<p>You can change the aggregation method of a <code>Measure</code> (<code><a href="../../../reference/makeMeasure.html">makeMeasure()</a></code>) via function <code><a href="../../../reference/setAggregation.html">setAggregation()</a></code>. All available aggregation schemes are listed on the <code><a href="../../../reference/aggregations.html">aggregations()</a></code> documentation page.</p>
<div id="example-one-measure-with-different-aggregations" class="section level4">
<h4 class="hasAnchor">
<a href="#example-one-measure-with-different-aggregations" class="anchor"></a>Example: One measure with different aggregations</h4>
<p>The aggregation schemes <code>test.median</code> (<code><a href="../../../reference/aggregations.html">aggregations()</a></code>), <code>test.min</code> (<code><a href="../../../reference/aggregations.html">aggregations()</a></code>), and <code>text.max</code> (<code><a href="../../../reference/aggregations.html">aggregations()</a></code>) compute the median, minimum, and maximum of the performance values on the test sets.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1">mseTestMedian =<span class="st"> </span><span class="kw"><a href="../../../reference/setAggregation.html">setAggregation</a></span>(mse, test.median)</a>
<a class="sourceLine" id="cb24-2" data-line-number="2">mseTestMin =<span class="st"> </span><span class="kw"><a href="../../../reference/setAggregation.html">setAggregation</a></span>(mse, test.min)</a>
<a class="sourceLine" id="cb24-3" data-line-number="3">mseTestMax =<span class="st"> </span><span class="kw"><a href="../../../reference/setAggregation.html">setAggregation</a></span>(mse, test.max)</a>
<a class="sourceLine" id="cb24-4" data-line-number="4"></a>
<a class="sourceLine" id="cb24-5" data-line-number="5">mseTestMedian</a>
<a class="sourceLine" id="cb24-6" data-line-number="6">## Name: Mean of squared errors</a>
<a class="sourceLine" id="cb24-7" data-line-number="7">## Performance measure: mse</a>
<a class="sourceLine" id="cb24-8" data-line-number="8">## Properties: regr,req.pred,req.truth</a>
<a class="sourceLine" id="cb24-9" data-line-number="9">## Minimize: TRUE</a>
<a class="sourceLine" id="cb24-10" data-line-number="10">## Best: 0; Worst: Inf</a>
<a class="sourceLine" id="cb24-11" data-line-number="11">## Aggregated by: test.median</a>
<a class="sourceLine" id="cb24-12" data-line-number="12">## Arguments: </a>
<a class="sourceLine" id="cb24-13" data-line-number="13">## Note: Defined as: mean((response - truth)^2)</a>
<a class="sourceLine" id="cb24-14" data-line-number="14">rdesc =<span class="st"> </span><span class="kw"><a href="../../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb24-15" data-line-number="15">r =<span class="st"> </span><span class="kw"><a href="../../../reference/resample.html">resample</a></span>(<span class="st">"regr.lm"</span>, bh.task, rdesc, <span class="dt">measures =</span> <span class="kw">list</span>(mse, mseTestMedian, mseTestMin, mseTestMax))</a>
<a class="sourceLine" id="cb24-16" data-line-number="16">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb24-17" data-line-number="17">## Measures:             mse       mse       mse       mse</a>
<a class="sourceLine" id="cb24-18" data-line-number="18">## [Resample] iter 1:    25.305493825.305493825.305493825.3054938</a>
<a class="sourceLine" id="cb24-19" data-line-number="19">## [Resample] iter 2:    20.233508020.233508020.233508020.2335080</a>
<a class="sourceLine" id="cb24-20" data-line-number="20">## [Resample] iter 3:    24.218012624.218012624.218012624.2180126</a>
<a class="sourceLine" id="cb24-21" data-line-number="21">## </a>
<a class="sourceLine" id="cb24-22" data-line-number="22">## Aggregated Result: mse.test.mean=23.2523381,mse.test.median=24.2180126,mse.test.min=20.2335080,mse.test.max=25.3054938</a>
<a class="sourceLine" id="cb24-23" data-line-number="23">## </a>
<a class="sourceLine" id="cb24-24" data-line-number="24">r</a>
<a class="sourceLine" id="cb24-25" data-line-number="25">## Resample Result</a>
<a class="sourceLine" id="cb24-26" data-line-number="26">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb24-27" data-line-number="27">## Learner: regr.lm</a>
<a class="sourceLine" id="cb24-28" data-line-number="28">## Aggr perf: mse.test.mean=23.2523381,mse.test.median=24.2180126,mse.test.min=20.2335080,mse.test.max=25.3054938</a>
<a class="sourceLine" id="cb24-29" data-line-number="29">## Runtime: 0.0423658</a>
<a class="sourceLine" id="cb24-30" data-line-number="30">r<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb24-31" data-line-number="31">##   mse.test.mean mse.test.median    mse.test.min    mse.test.max </a>
<a class="sourceLine" id="cb24-32" data-line-number="32">##        23.25234        24.21801        20.23351        25.30549</a></code></pre></div>
</div>
<div id="example-calculating-the-training-error" class="section level4">
<h4 class="hasAnchor">
<a href="#example-calculating-the-training-error" class="anchor"></a>Example: Calculating the training error</h4>
<p>Below we calculate the mean misclassification error (<a href="measures.html" target="_blank">mmce</a>) on the training and the test data sets. Note that we have to set <code>predict = "both"</code> when calling <code><a href="../../../reference/makeResampleDesc.html">makeResampleDesc()</a></code> in order to get predictions on both training and test sets.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1">mmceTrainMean =<span class="st"> </span><span class="kw"><a href="../../../reference/setAggregation.html">setAggregation</a></span>(mmce, train.mean)</a>
<a class="sourceLine" id="cb25-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">predict =</span> <span class="st">"both"</span>)</a>
<a class="sourceLine" id="cb25-3" data-line-number="3">r =<span class="st"> </span><span class="kw"><a href="../../../reference/resample.html">resample</a></span>(<span class="st">"classif.rpart"</span>, iris.task, rdesc, <span class="dt">measures =</span> <span class="kw">list</span>(mmce, mmceTrainMean))</a>
<a class="sourceLine" id="cb25-4" data-line-number="4">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb25-5" data-line-number="5">## Measures:             mmce.train   mmce.test</a>
<a class="sourceLine" id="cb25-6" data-line-number="6">## [Resample] iter 1:    0.0400000    0.0400000</a>
<a class="sourceLine" id="cb25-7" data-line-number="7">## [Resample] iter 2:    0.0400000    0.0400000</a>
<a class="sourceLine" id="cb25-8" data-line-number="8">## [Resample] iter 3:    0.0100000    0.1200000</a>
<a class="sourceLine" id="cb25-9" data-line-number="9">## </a>
<a class="sourceLine" id="cb25-10" data-line-number="10">## Aggregated Result: mmce.test.mean=0.0666667,mmce.train.mean=0.0300000</a>
<a class="sourceLine" id="cb25-11" data-line-number="11">## </a>
<a class="sourceLine" id="cb25-12" data-line-number="12">r<span class="op">$</span>measures.train</a>
<a class="sourceLine" id="cb25-13" data-line-number="13">##   iter mmce mmce</a>
<a class="sourceLine" id="cb25-14" data-line-number="14">## 1    1 0.04 0.04</a>
<a class="sourceLine" id="cb25-15" data-line-number="15">## 2    2 0.04 0.04</a>
<a class="sourceLine" id="cb25-16" data-line-number="16">## 3    3 0.01 0.01</a>
<a class="sourceLine" id="cb25-17" data-line-number="17">r<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb25-18" data-line-number="18">##  mmce.test.mean mmce.train.mean </a>
<a class="sourceLine" id="cb25-19" data-line-number="19">##      0.06666667      0.03000000</a></code></pre></div>
</div>
<div id="example-bootstrap" class="section level4">
<h4 class="hasAnchor">
<a href="#example-bootstrap" class="anchor"></a>Example: Bootstrap</h4>
<p>In <em>out-of-bag bootstrap estimation</em> <span class="math inline">\(B\)</span> new data sets <span class="math inline">\(D^{*1}, \ldots, D^{*B}\)</span> are drawn from the data set <span class="math inline">\(D\)</span> with replacement, each of the same size as <span class="math inline">\(D\)</span>. In the <span class="math inline">\(b\)</span>-th iteration, <span class="math inline">\(D^{*b}\)</span> forms the training set, while the remaining elements from <span class="math inline">\(D\)</span>, i.e., <span class="math inline">\(D \setminus D^{*b}\)</span>, form the test set.</p>
<!--(
                     |resampling_desc_figure|

                     |resampling_nested_resampling_figure|
)-->
<p>The <em>b632</em> and <em>b632+</em> variants calculate a convex combination of the training performance and the out-of-bag bootstrap performance and thus require predictions on the training sets and an appropriate aggregation strategy.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1">### Use bootstrap as resampling strategy and predict on both train and test sets</a>
<a class="sourceLine" id="cb26-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Bootstrap"</span>, <span class="dt">predict =</span> <span class="st">"both"</span>, <span class="dt">iters =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb26-3" data-line-number="3"></a>
<a class="sourceLine" id="cb26-4" data-line-number="4">### Set aggregation schemes for b632 and b632+ bootstrap</a>
<a class="sourceLine" id="cb26-5" data-line-number="5">mmceB632 =<span class="st"> </span><span class="kw"><a href="../../../reference/setAggregation.html">setAggregation</a></span>(mmce, b632)</a>
<a class="sourceLine" id="cb26-6" data-line-number="6">mmceB632plus =<span class="st"> </span><span class="kw"><a href="../../../reference/setAggregation.html">setAggregation</a></span>(mmce, b632plus)</a>
<a class="sourceLine" id="cb26-7" data-line-number="7"></a>
<a class="sourceLine" id="cb26-8" data-line-number="8">mmceB632</a>
<a class="sourceLine" id="cb26-9" data-line-number="9">## Name: Mean misclassification error</a>
<a class="sourceLine" id="cb26-10" data-line-number="10">## Performance measure: mmce</a>
<a class="sourceLine" id="cb26-11" data-line-number="11">## Properties: classif,classif.multi,req.pred,req.truth</a>
<a class="sourceLine" id="cb26-12" data-line-number="12">## Minimize: TRUE</a>
<a class="sourceLine" id="cb26-13" data-line-number="13">## Best: 0; Worst: 1</a>
<a class="sourceLine" id="cb26-14" data-line-number="14">## Aggregated by: b632</a>
<a class="sourceLine" id="cb26-15" data-line-number="15">## Arguments: </a>
<a class="sourceLine" id="cb26-16" data-line-number="16">## Note: Defined as: mean(response != truth)</a>
<a class="sourceLine" id="cb26-17" data-line-number="17">r =<span class="st"> </span><span class="kw"><a href="../../../reference/resample.html">resample</a></span>(<span class="st">"classif.rpart"</span>, iris.task, rdesc, <span class="dt">measures =</span> <span class="kw">list</span>(mmce, mmceB632, mmceB632plus),</a>
<a class="sourceLine" id="cb26-18" data-line-number="18">  <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb26-19" data-line-number="19"><span class="kw">head</span>(r<span class="op">$</span>measures.train)</a>
<a class="sourceLine" id="cb26-20" data-line-number="20">##   iter        mmce        mmce        mmce</a>
<a class="sourceLine" id="cb26-21" data-line-number="21">## 1    1 0.020000000 0.020000000 0.020000000</a>
<a class="sourceLine" id="cb26-22" data-line-number="22">## 2    2 0.013333333 0.013333333 0.013333333</a>
<a class="sourceLine" id="cb26-23" data-line-number="23">## 3    3 0.020000000 0.020000000 0.020000000</a>
<a class="sourceLine" id="cb26-24" data-line-number="24">## 4    4 0.006666667 0.006666667 0.006666667</a>
<a class="sourceLine" id="cb26-25" data-line-number="25">## 5    5 0.026666667 0.026666667 0.026666667</a>
<a class="sourceLine" id="cb26-26" data-line-number="26">## 6    6 0.013333333 0.013333333 0.013333333</a>
<a class="sourceLine" id="cb26-27" data-line-number="27">### Compare misclassification rates for out-of-bag, b632, and b632+ bootstrap</a>
<a class="sourceLine" id="cb26-28" data-line-number="28">r<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb26-29" data-line-number="29">## mmce.test.mean      mmce.b632  mmce.b632plus </a>
<a class="sourceLine" id="cb26-30" data-line-number="30">##     0.08074230     0.05863447     0.06025834</a></code></pre></div>
</div>
</div>
<div id="convenience-functions" class="section level3">
<h3 class="hasAnchor">
<a href="#convenience-functions" class="anchor"></a>Convenience functions</h3>
<p>The functionality described on this page allows for much control and flexibility. However, when quickly trying out some learners, it can get tedious to type all the code for defining the resampling strategy, setting the aggregation scheme and so on. As mentioned above, <code>mlr</code> includes some pre-defined resample description objects for frequently used strategies like, e.g., 5-fold cross-validation (<code>cv5</code> (<code><a href="../../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>)). Moreover, <code>mlr</code> provides special functions for the most common resampling methods, for example <code>holdout</code> (<code><a href="../../../reference/resample.html">resample()</a></code>), <code>crossval</code> (<code><a href="../../../reference/resample.html">resample()</a></code>), or <code>bootstrapB632</code> (<code><a href="../../../reference/resample.html">resample()</a></code>).</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="kw"><a href="../../../reference/resample.html">crossval</a></span>(<span class="st">"classif.lda"</span>, iris.task, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">measures =</span> <span class="kw">list</span>(mmce, ber))</a>
<a class="sourceLine" id="cb27-2" data-line-number="2">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb27-3" data-line-number="3">## Measures:             mmce      ber</a>
<a class="sourceLine" id="cb27-4" data-line-number="4">## [Resample] iter 1:    0.0000000 0.0000000</a>
<a class="sourceLine" id="cb27-5" data-line-number="5">## [Resample] iter 2:    0.0400000 0.0444444</a>
<a class="sourceLine" id="cb27-6" data-line-number="6">## [Resample] iter 3:    0.0200000 0.0185185</a>
<a class="sourceLine" id="cb27-7" data-line-number="7">## </a>
<a class="sourceLine" id="cb27-8" data-line-number="8">## Aggregated Result: mmce.test.mean=0.0200000,ber.test.mean=0.0209877</a>
<a class="sourceLine" id="cb27-9" data-line-number="9">## </a>
<a class="sourceLine" id="cb27-10" data-line-number="10">## Resample Result</a>
<a class="sourceLine" id="cb27-11" data-line-number="11">## Task: iris-example</a>
<a class="sourceLine" id="cb27-12" data-line-number="12">## Learner: classif.lda</a>
<a class="sourceLine" id="cb27-13" data-line-number="13">## Aggr perf: mmce.test.mean=0.0200000,ber.test.mean=0.0209877</a>
<a class="sourceLine" id="cb27-14" data-line-number="14">## Runtime: 0.038115</a>
<a class="sourceLine" id="cb27-15" data-line-number="15"><span class="kw"><a href="../../../reference/resample.html">bootstrapB632plus</a></span>(<span class="st">"regr.lm"</span>, bh.task, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">measures =</span> <span class="kw">list</span>(mse, mae))</a>
<a class="sourceLine" id="cb27-16" data-line-number="16">## Resampling: OOB bootstrapping</a>
<a class="sourceLine" id="cb27-17" data-line-number="17">## Measures:             mse.train   mae.train   mse.test    mae.test</a>
<a class="sourceLine" id="cb27-18" data-line-number="18">## [Resample] iter 1:    18.4539467  3.0090015   27.2569830  3.4659318</a>
<a class="sourceLine" id="cb27-19" data-line-number="19">## [Resample] iter 2:    18.9871189  3.1143697   27.8336481  3.4995237</a>
<a class="sourceLine" id="cb27-20" data-line-number="20">## [Resample] iter 3:    22.8027520  3.3181051   18.9911230  3.2912211</a>
<a class="sourceLine" id="cb27-21" data-line-number="21">## </a>
<a class="sourceLine" id="cb27-22" data-line-number="22">## Aggregated Result: mse.b632plus=23.1073455,mae.b632plus=3.3235610</a>
<a class="sourceLine" id="cb27-23" data-line-number="23">## </a>
<a class="sourceLine" id="cb27-24" data-line-number="24">## Resample Result</a>
<a class="sourceLine" id="cb27-25" data-line-number="25">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb27-26" data-line-number="26">## Learner: regr.lm</a>
<a class="sourceLine" id="cb27-27" data-line-number="27">## Aggr perf: mse.b632plus=23.1073455,mae.b632plus=3.3235610</a>
<a class="sourceLine" id="cb27-28" data-line-number="28">## Runtime: 0.063977</a></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#defining-the-resampling-strategy">Defining the resampling strategy</a></li>
      <li><a href="#performing-the-resampling">Performing the resampling</a></li>
      <li>
<a href="#accessing-resample-results">Accessing resample results</a><ul class="nav nav-pills nav-stacked">
<li><a href="#predictions">Predictions</a></li>
      <li><a href="#learner-models">Learner models</a></li>
      <li><a href="#the-extract-option">The extract option</a></li>
      </ul>
</li>
      <li>
<a href="#stratification-and-blocking">Stratification and blocking</a><ul class="nav nav-pills nav-stacked">
<li><a href="#stratification-with-respect-to-the-target-variables">Stratification with respect to the target variable(s)</a></li>
      <li><a href="#stratification-with-respect-to-explanatory-variables">Stratification with respect to explanatory variables</a></li>
      <li><a href="#blocking">Blocking</a></li>
      </ul>
</li>
      <li><a href="#resample-descriptions-and-resample-instances">Resample descriptions and resample instances</a></li>
      <li>
<a href="#aggregating-performance-values">Aggregating performance values</a><ul class="nav nav-pills nav-stacked">
<li><a href="#example-one-measure-with-different-aggregations">Example: One measure with different aggregations</a></li>
      <li><a href="#example-calculating-the-training-error">Example: Calculating the training error</a></li>
      <li><a href="#example-bootstrap">Example: Bootstrap</a></li>
      </ul>
</li>
      <li><a href="#convenience-functions">Convenience functions</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Bernd Bischl, Michel Lang, Lars Kotthoff, Julia Schiffner, Jakob Richter, Zachary Jones, Giuseppe Casalicchio, Mason Gallo.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
